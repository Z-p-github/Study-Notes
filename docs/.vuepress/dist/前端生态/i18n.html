<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为什么要做国际化 | 学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="前端技术相关的文章，包含不限于vue，react，webpack，nodejs，算法等等">
    
    <link rel="preload" href="/Study-Notes/assets/css/0.styles.bbfc63dd.css" as="style"><link rel="preload" href="/Study-Notes/assets/js/app.ef3f82a2.js" as="script"><link rel="preload" href="/Study-Notes/assets/js/2.9c4c794d.js" as="script"><link rel="preload" href="/Study-Notes/assets/js/4.3b198599.js" as="script"><link rel="preload" href="/Study-Notes/assets/js/13.2cd6dd7e.js" as="script"><link rel="prefetch" href="/Study-Notes/assets/js/10.ad9cb5ae.js"><link rel="prefetch" href="/Study-Notes/assets/js/11.0c339e54.js"><link rel="prefetch" href="/Study-Notes/assets/js/12.22c25026.js"><link rel="prefetch" href="/Study-Notes/assets/js/14.2f361ea7.js"><link rel="prefetch" href="/Study-Notes/assets/js/15.10bb28db.js"><link rel="prefetch" href="/Study-Notes/assets/js/16.252815f9.js"><link rel="prefetch" href="/Study-Notes/assets/js/17.86dbe75b.js"><link rel="prefetch" href="/Study-Notes/assets/js/18.35a16e23.js"><link rel="prefetch" href="/Study-Notes/assets/js/19.0bc99619.js"><link rel="prefetch" href="/Study-Notes/assets/js/20.dee858df.js"><link rel="prefetch" href="/Study-Notes/assets/js/21.36258b66.js"><link rel="prefetch" href="/Study-Notes/assets/js/22.d2f22673.js"><link rel="prefetch" href="/Study-Notes/assets/js/23.0ef0273f.js"><link rel="prefetch" href="/Study-Notes/assets/js/24.2c97541f.js"><link rel="prefetch" href="/Study-Notes/assets/js/25.fedab2b9.js"><link rel="prefetch" href="/Study-Notes/assets/js/26.f00961e5.js"><link rel="prefetch" href="/Study-Notes/assets/js/27.c370df01.js"><link rel="prefetch" href="/Study-Notes/assets/js/28.1bd806e5.js"><link rel="prefetch" href="/Study-Notes/assets/js/29.4178458a.js"><link rel="prefetch" href="/Study-Notes/assets/js/3.18c6bc79.js"><link rel="prefetch" href="/Study-Notes/assets/js/30.783e4ef1.js"><link rel="prefetch" href="/Study-Notes/assets/js/31.bc2d8c44.js"><link rel="prefetch" href="/Study-Notes/assets/js/32.2022fdf1.js"><link rel="prefetch" href="/Study-Notes/assets/js/33.abdee2e3.js"><link rel="prefetch" href="/Study-Notes/assets/js/34.30dfd93b.js"><link rel="prefetch" href="/Study-Notes/assets/js/35.f24f6149.js"><link rel="prefetch" href="/Study-Notes/assets/js/36.c5f45640.js"><link rel="prefetch" href="/Study-Notes/assets/js/37.ee220940.js"><link rel="prefetch" href="/Study-Notes/assets/js/38.ddf03e64.js"><link rel="prefetch" href="/Study-Notes/assets/js/39.5dda143b.js"><link rel="prefetch" href="/Study-Notes/assets/js/40.d7605858.js"><link rel="prefetch" href="/Study-Notes/assets/js/41.20d98cb1.js"><link rel="prefetch" href="/Study-Notes/assets/js/42.97f8a222.js"><link rel="prefetch" href="/Study-Notes/assets/js/43.b985b902.js"><link rel="prefetch" href="/Study-Notes/assets/js/5.67552f06.js"><link rel="prefetch" href="/Study-Notes/assets/js/6.48fe274e.js"><link rel="prefetch" href="/Study-Notes/assets/js/7.566f74f4.js"><link rel="prefetch" href="/Study-Notes/assets/js/8.750f0c33.js"><link rel="prefetch" href="/Study-Notes/assets/js/9.bfa7852f.js">
    <link rel="stylesheet" href="/Study-Notes/assets/css/0.styles.bbfc63dd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Study-Notes/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Study-Notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://github.com/Z-p-github/Study-Notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Study-Notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://github.com/Z-p-github/Study-Notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Study-Notes/" aria-current="page" class="sidebar-link">主页</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Study-Notes/JavaScript/小顶堆.html" class="sidebar-link">小顶堆</a></li><li><a href="/Study-Notes/JavaScript/位运算.html" class="sidebar-link">位运算</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>React Fiber</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Study-Notes/React/React-Fiber/React理念.html" class="sidebar-link">React理念</a></li><li><a href="/Study-Notes/React/React-Fiber/ReactFiber架构.html" class="sidebar-link">Fiber架构</a></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>React Fiber Render</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Study-Notes/React/React-Fiber/Fiber-dom-diff/beginWork.html" class="sidebar-link">beginWork阶段</a></li><li><a href="/Study-Notes/React/React-Fiber/Fiber-dom-diff/completeWork.html" class="sidebar-link">completeWork阶段</a></li><li><a href="/Study-Notes/React/React-Fiber/Fiber-dom-diff/commit.html" class="sidebar-link">commit阶段</a></li><li><a href="/Study-Notes/React/React-Fiber/Fiber-dom-diff/domdiff.html" class="sidebar-link">completeWork-diff阶段</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>Concurrent Mode</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Study-Notes/React/Concurrent-Mode/React中的事件优先级调度.html" class="sidebar-link">React事件优先级调度</a></li><li><a href="/Study-Notes/React/Concurrent-Mode/scheduler.html" class="sidebar-link">scheduler具体实现</a></li><li><a href="/Study-Notes/React/Concurrent-Mode/lane.html" class="sidebar-link">lane模型</a></li></ul></section></li><li><a href="/Study-Notes/React/React17.html" class="sidebar-link">React17</a></li><li><a href="/Study-Notes/React/React18.html" class="sidebar-link">React18</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Study-Notes/Vue/Vue3+Typescript实现Form组件.html" class="sidebar-link">Vue3+Typescript实现Form组件</a></li><li><a href="/Study-Notes/Vue/搭建vue3和ts组件库开发环境.html" class="sidebar-link">搭建vue3和ts组件库开发环境</a></li><li><a href="/Study-Notes/Vue/Vite2配置项目开发环境.html" class="sidebar-link">Vite2配置项目开发环境</a></li><li><a href="/Study-Notes/Vue/基于Element-plus实现虚拟下拉组件.html" class="sidebar-link">基于Element-plus实现虚拟下拉组件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端生态</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Study-Notes/前端生态/eslint.html" class="sidebar-link">eslint</a></li><li><a href="/Study-Notes/前端生态/flutter实践.html" class="sidebar-link">flutter实践</a></li><li><a href="/Study-Notes/前端生态/flutter消息推送.html" class="sidebar-link">flutter消息推送</a></li><li><a href="/Study-Notes/前端生态/antd5架构分析.html" class="sidebar-link">antd5研究</a></li><li><a href="/Study-Notes/前端生态/element-plus架构分析.html" class="sidebar-link">element-plus样式+打包分析</a></li><li><a href="/Study-Notes/前端生态/ts类型打包.html" class="sidebar-link">ts类型打包</a></li><li><a href="/Study-Notes/前端生态/vscode扩展工具.html" class="sidebar-link">vscode扩展工具实现</a></li><li><a href="/Study-Notes/前端生态/svelte.html" class="sidebar-link">svelte框架</a></li><li><a href="/Study-Notes/前端生态/i18n.html" class="active sidebar-link">国际化解决方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Study-Notes/前端生态/i18n.html#为什么要做国际化" class="sidebar-link">为什么要做国际化</a></li><li class="sidebar-sub-header"><a href="/Study-Notes/前端生态/i18n.html#一般改造" class="sidebar-link">一般改造</a></li><li class="sidebar-sub-header"><a href="/Study-Notes/前端生态/i18n.html#工具流程" class="sidebar-link">工具流程</a></li><li class="sidebar-sub-header"><a href="/Study-Notes/前端生态/i18n.html#工具流程原理" class="sidebar-link">工具流程原理</a></li><li class="sidebar-sub-header"><a href="/Study-Notes/前端生态/i18n.html#平台项目管理" class="sidebar-link">平台项目管理</a></li><li class="sidebar-sub-header"><a href="/Study-Notes/前端生态/i18n.html#架构" class="sidebar-link">架构</a></li><li class="sidebar-sub-header"><a href="/Study-Notes/前端生态/i18n.html#问题" class="sidebar-link">问题</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>go</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Study-Notes/go/mac如何安装grpc.html" class="sidebar-link">mac安装grpc</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="为什么要做国际化"><a href="#为什么要做国际化" class="header-anchor">#</a> 为什么要做国际化</h2> <ul><li><p>1、扩大用户基础：通过将应用程序翻译成多种语言，可以吸引更多的用户来使用您的产品或服务。不同语言和地区的用户能够以自己熟悉的语言使用应用程序，这有助于拓展用户基础并增加潜在的客户。</p></li> <li><p>2、提升用户体验：国际化使得用户能够在自己的语言环境中使用应用程序，这提供了更好的用户体验。用户可以更容易地理解应用程序的界面、指令和内容，从而提高使用效率和满意度。</p></li> <li><p>3、遵循法律法规：在一些国家或地区，有法律要求将应用程序提供给用户的语言进行本地化。通过进行国际化，您可以遵守这些法律法规，并确保您的应用程序在全球范围内合法运营。</p></li> <li><p>4、方便公司出海战略实施</p></li></ul> <h2 id="一般改造"><a href="#一般改造" class="header-anchor">#</a> 一般改造</h2> <p>项目中常见的国际化方案如下：</p> <ul><li>1、首先需要将项目中的中文提取成一个个的<code>json文件</code>,并且需要按照不同的语种来进行文件划分</li> <li>2、其次需要将项目代码中原本的中文，替换成 <code>$t(...)</code>的形式</li> <li>3、切换语种的时候，本地设置一个 locale，然后重新刷新一下页面即可</li></ul> <img src="/Study-Notes/assets/img/old.e52deb08.png" alt="center" height="250"> <h3 id="存在的问题"><a href="#存在的问题" class="header-anchor">#</a> 存在的问题</h3> <p>虽然社区方案给我们带来了极大便利，但是仍有 3 个问题没有解决：</p> <ul><li>1、需要手工将代码中的主语言（比如中文）替换成国际化标记，导致查找相关代码时变得繁琐。</li> <li>2、开发的时候，需要将中文写在配置文件里面，影响开发时候的效率。</li> <li>3、语言包应该是一种配置，不必强耦合到项目代码里。</li></ul> <p><strong>那么如何快速的改造老项目？如何规范新项目呢？</strong></p> <p>基于上述的几个问题，我们开发了一款国际化工具和国际化平台来实现项目的国际化快速改造。</p> <h2 id="工具流程"><a href="#工具流程" class="header-anchor">#</a> 工具流程</h2> <img src="/Study-Notes/assets/img/new.fbc0ddcb.png" alt="center" height="250"> <p>我们的工具主要的流程如下：</p> <ul><li>1、首先初始化一个配置文件，配置文件主要包含的是我们工具运作的一些参数，比如入口，匹配的文件，关联的项目 id</li> <li>2、通过命令提取语料，全部提取到根目录项目的配置文件中</li></ul> <p>提取出来的文件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> langs <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;zh-cn&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;你好啊#!!!#src/app.vue_1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你好啊&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;你在干啥#!!!#src/app.vue_1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你在干啥&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

globalThis<span class="token punctuation">.</span>__tci18n_langs__ <span class="token operator">=</span> langs<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getLocale</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> langs <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;zh-tw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;zh-hk&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;en-hk&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;en-gb&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ko-kr&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ja-jp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;th-th&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ge-de&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ma-ms&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ar-ar&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;it-it&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;es-es&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;po-pt&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bl-mj&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ru-ru&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigatorLang <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;zh-CN&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;zh-TW&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zh-tw&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;zh-HK&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zh-hk&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">en</span><span class="token operator">:</span> <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;en-US&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;en-GB&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en-gb&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ko</span><span class="token operator">:</span> <span class="token string">&quot;ko-kr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;ko-KR&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ko-kr&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ja</span><span class="token operator">:</span> <span class="token string">&quot;ja-jp&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;ja-JP&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ja-jp&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fr</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;fr-BE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;fr-CA&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;fr-LU&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">th</span><span class="token operator">:</span> <span class="token string">&quot;th-th&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> locale <span class="token operator">=</span>
    localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;tci18nLocale&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span>
    navigatorLang<span class="token punctuation">[</span>navigator<span class="token punctuation">.</span>language<span class="token punctuation">]</span> <span class="token operator">||</span>
    <span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> langs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">lang</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">~</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>lang<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> locale<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

globalThis<span class="token punctuation">.</span>__tci18n_locale__ <span class="token operator">=</span> <span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>3、提取出来之后需要上传到我们研发的国际化平台上面 ，通过命令 <code>publish</code>发布到国际化平台上面去</p></li> <li><p>4、在平台上面统一使用后端服务来一键翻译语料成不同的语种</p></li> <li><p>5、复制语料链接，并通过<code>script</code>标签引入到本地项目中，这个时候，全局的 window 下面就会有一些语料资源</p></li></ul> <img src="/Study-Notes/assets/img/language.b087e51d.png" alt="center"> <ul><li>6、项目中配置<code>webpack插件</code>或者<code>vite插件</code>，用于在运行时和构建时将中文动态替换成<code>$t(...)</code>的形式，开发者还是正常使用中文开发就行</li></ul> <p>优势：</p> <ul><li>1、开发者不需要手动提取语料和翻译，全部通过平台使用的谷歌或者百度等翻译工具</li> <li>2、开发的时候还是用中文开发，只需要开发完成或者变更的时候重新提取一下语料</li> <li>3、从 0-1 改造一个老项目国际化只需要 5 分钟</li> <li>4、语言包和项目代码完全解耦。</li></ul> <h2 id="工具流程原理"><a href="#工具流程原理" class="header-anchor">#</a> 工具流程原理</h2> <p>此处以<code>vue3</code>项目为例</p> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <p><strong>下面提到的 npm 包为私有包，暂时没有开源</strong></p> <p>1、安装脚手架工具</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install i18n<span class="token operator">-</span>cli <span class="token operator">-</span>g
</code></pre></div><p>2、在项目中安装以下依赖包</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install i18n<span class="token operator">-</span>plugin i18n<span class="token operator">-</span>vue3
</code></pre></div><h3 id="项目配置"><a href="#项目配置" class="header-anchor">#</a> 项目配置</h3> <p>1、初始化配置</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token operator">-</span>i18n init
</code></pre></div><p>这个时候项目的根目录会生成一个配置文件 : <code>i18n.config.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/app.vue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//入口</span>
  <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//排除的文件</span>
  <span class="token literal-property property">disableAutoTranslate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//自动转换</span>
  <span class="token literal-property property">extractOnly</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否只提取</span>
  <span class="token literal-property property">ignoreComponents</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//忽略的组件</span>
  <span class="token literal-property property">ignoreMethods</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//忽略的方法</span>
  <span class="token literal-property property">ignoreAttrs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//忽略的树形，例如 vue绑定style=&quot;font-family:'微软雅黑'&quot;,这种正文是不能提取的</span>
  <span class="token literal-property property">supportedLocales</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//支持的语料(可忽略)</span>
  <span class="token literal-property property">importCode</span><span class="token operator">:</span> <span class="token string">&quot;import { intl } from 'i18n-intl';&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">i18nMethod</span><span class="token operator">:</span> <span class="token string">&quot;$t&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">localeConf</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">folder</span><span class="token operator">:</span> <span class="token string">&quot;locales&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">vueVersion</span><span class="token operator">:</span> <span class="token string">&quot;vue3&quot;</span><span class="token punctuation">,</span> <span class="token comment">//vue版本</span>
  <span class="token literal-property property">publishConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">projectId</span><span class="token operator">:</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">uploader</span><span class="token operator">:</span> <span class="token string">&quot;测试&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">isDebug</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//发布相关配置</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>2、语料提取</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token operator">-</span>i18n transform
</code></pre></div><p><code>transform</code>之后，项目中就会生成一些语料文件，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> langs <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;zh-cn&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;你好啊#!!!#src/app.vue_1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你好啊&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;你在干啥#!!!#src/app.vue_1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你在干啥&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

globalThis<span class="token punctuation">.</span>__tci18n_langs__ <span class="token operator">=</span> langs<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getLocale</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> langs <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;zh-tw&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;zh-hk&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;en-hk&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;en-gb&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ko-kr&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ja-jp&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;th-th&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ge-de&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ma-ms&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ar-ar&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;it-it&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;es-es&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;po-pt&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bl-mj&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ru-ru&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigatorLang <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;zh-CN&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;zh-TW&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zh-tw&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;zh-HK&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zh-hk&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">en</span><span class="token operator">:</span> <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;en-US&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en-us&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;en-GB&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en-gb&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ko</span><span class="token operator">:</span> <span class="token string">&quot;ko-kr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;ko-KR&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ko-kr&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ja</span><span class="token operator">:</span> <span class="token string">&quot;ja-jp&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;ja-JP&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ja-jp&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fr</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;fr-BE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;fr-CA&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;fr-LU&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fr-fr&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">th</span><span class="token operator">:</span> <span class="token string">&quot;th-th&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> locale <span class="token operator">=</span>
    localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;i18nLocale&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span>
    navigatorLang<span class="token punctuation">[</span>navigator<span class="token punctuation">.</span>language<span class="token punctuation">]</span> <span class="token operator">||</span>
    <span class="token string">&quot;zh-cn&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> langs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">lang</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">~</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>lang<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> locale<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

globalThis<span class="token punctuation">.</span>__tci18n_locale__ <span class="token operator">=</span> <span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="提取流程"><a href="#提取流程" class="header-anchor">#</a> 提取流程</h3> <p>1、首先我们需要读取根目录下面的配置文件，将里面的配置取出来</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span><span class="token parameter">programOption<span class="token punctuation">,</span> programParameter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> defaultOptions<span class="token punctuation">;</span>
  <span class="token keyword">const</span> configFileName <span class="token operator">=</span> <span class="token string">&quot;i18n.config.js&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> configFilePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>cwdPath<span class="token punctuation">,</span> configFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 读取 i18n.config.js 中设置的参数，然后并入 options</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>configFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> configurationFile <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> configStr <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>configFilePath<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//去掉module.exports</span>
      configurationFile <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span>
        <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> configStr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(module.exports\s*=\s*)|;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">请检查 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>configFileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 配置文件是否正确\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> configurationFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">配置文件 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>configFileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 不存在，请先执行 init初始化命令\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 处理命令行参数</span>
  programParameter<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">k</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> programOption<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token string">&quot;exclude&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        options<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        options<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> options<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2、获取到源码再通过不同的工具去编译解析</p> <p>其中</p> <p>大致流程如下：</p> <ul><li><p>1、先读取匹配到的文件的源码</p></li> <li><p>2、根据不同的框架来编辑模版</p></li> <li><p><code>vue3</code>使用 <code>@vue/compiler-sfc</code></p></li> <li><p><code>vue2</code>使用 <code>vue-template-compiler</code></p></li> <li><p><code>js</code>使用 <code>babel</code></p></li> <li><p>3、<code>html</code>部分使用<code>parse5</code> 来解析成<code>ast语法树</code>，<code>js</code>部分使用<code>babel</code>来解析成<code>ast</code></p></li> <li><p>4、遍历<code>ast</code>，用正则取匹配节点中的中文，然后进行预料提取</p></li></ul> <img src="/Study-Notes/assets/img/parse1.0d4c46a6.png" alt="center"> <img src="/Study-Notes/assets/img/parse2.d348ee5f.png" alt="center"> <h3 id="上传"><a href="#上传" class="header-anchor">#</a> 上传</h3> <p>提取语料之后，我们可以通过我们的脚手架命令将当前项目的语料上传到我们的语料平台上面去，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token operator">-</span>i18n upload
</code></pre></div><h3 id="构建工具插件机制"><a href="#构建工具插件机制" class="header-anchor">#</a> 构建工具插件机制</h3> <p>当我们把预料提取出来之后，完全可以将中文替换成 <code>$t(...)</code>的形式，但是直接替换源码真的好吗？</p> <p>答案是肯定不好的，正如上面说到的：</p> <ul><li>1、直接替换的不方便代码查找，降低开发效率</li> <li>2、业务代码和国际化的耦合性太强</li></ul> <p>我们提出一种方案，开发一个<code>webpack</code>或者<code>vite</code>插件，在项目运行时和构建时去动态的将源代码中的中文替换成<code>$t(...)</code>的形式，但是却不会影响我们的本地代码，我们还是可以正常开发，这样就非常的便利了，开发者也不需要关注底层的逻辑，只需要按照正常的开发流程去处理业务即可。</p> <p><code>webpack插件</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">i18nPlugin</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//在afterResolvers阶段注入一个loader，这个loader就是用来替换原代码的，将中文替换成$t(...)</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterResolvers<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&quot;afterResolvers&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      compiler<span class="token punctuation">.</span>options<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(vue|ts|tsx|js|jsx)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/node_modules\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./loader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">configPath</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>configPath <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">i18nPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>loader</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> BaseTransform <span class="token keyword">from</span> <span class="token string">&quot;../BaseTransform&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formatPath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/utils&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> transform <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaseTransform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">i18nLoader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">content</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">map</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">meta</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  transform<span class="token punctuation">.</span><span class="token function">setLoaderOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isMatch <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">isMatchPath</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//是否和配置文件中的entry配置匹配</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isMatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> type <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">getFileType</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> filePath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourcePath<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rootContext <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> path<span class="token punctuation">.</span>sep<span class="token punctuation">,</span>
        <span class="token string">&quot;&quot;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//转换代码 主要是将中文转化成 $t(...)</span>
        <span class="token keyword">const</span> source <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">replaceSourceCode</span><span class="token punctuation">(</span>
          content<span class="token punctuation">,</span>
          type<span class="token punctuation">,</span>
          <span class="token function">formatPath</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//抛出转化之后的代码</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> source<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> source <span class="token operator">:</span> content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> i18nLoader<span class="token punctuation">;</span>
</code></pre></div><p>如下图：
<img src="/Study-Notes/assets/img/transform.9274e2be.png" alt="center"></p> <h3 id="前端项目配置"><a href="#前端项目配置" class="header-anchor">#</a> 前端项目配置</h3> <p>首先在<code>html</code>文件中插入平台生成语料链接</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//这个脚本会在全局的window挂载window.__tci18n_locale__ ,window.__tci18n_langs__等数据</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;平台生成语料链接&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><img src="/Study-Notes/assets/img/language2.bbc00992.png" alt="center"> <p>当我们的构建工具静默给我们把中文替换成了<code>$t(...)</code>之后，那么这个<code>$t(...)</code> 怎么变成具体的一种文字呢？</p> <p>以<code>vue</code>项目为例，我们需要在<code>vue</code>的原型上面挂载一个<code>$t</code>方法，这样子，我们项目中<code>$t(...)</code>的地方就可以变成具体的一种语种文字了，具体实现是我们需要开发一个 <code>npm 包</code>在通过<code>vue.use</code>的方式去注入使用，如下：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vueI18n <span class="token keyword">from</span> <span class="token string">&quot;vue-i18n&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useI18n<span class="token punctuation">,</span> splitKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;tci18n-share&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">initTci18n</span> <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> i18n <span class="token operator">=</span> vueI18n<span class="token punctuation">.</span><span class="token function">createI18n</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    locale<span class="token operator">:</span> options<span class="token punctuation">.</span>locale<span class="token punctuation">,</span> <span class="token comment">//传入的语种 例如 zh-cn</span>
    messages<span class="token operator">:</span> options<span class="token punctuation">.</span>langs<span class="token punctuation">,</span> <span class="token comment">//传入的语料文件 {zh-cn:{...}}</span>
    <span class="token function-variable function">missing</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">splitKey</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    i18n<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> TcI18n <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span>app<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> i18n <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">initTci18n</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>i18n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> TcI18n <span class="token keyword">as</span> <span class="token keyword">default</span><span class="token punctuation">,</span> useI18n <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>可以看到我们主要是借助了<code>vue-i18n</code>来实现了这个功能，因为<code>vue-i18n</code>会在全局的<code>vue</code>实例上面挂载一个<code>$t()</code>方法，页面即可正常渲染</p> <p>项目使用:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// i18n-vue3就是上面工具的名字，是一个单独的npm包</span>
<span class="token keyword">import</span> i18nVue3 <span class="token keyword">from</span> <span class="token string">&quot;i18n-vue3&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// window.__tci18n_locale__ ,window.__tci18n_langs__ 是通过平台生成语料链接地址，通过script标签注入进来的</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Tci18nVue3<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">locale</span><span class="token operator">:</span> window<span class="token punctuation">.</span>__tci18n_locale__<span class="token punctuation">,</span>
  <span class="token literal-property property">langs</span><span class="token operator">:</span> window<span class="token punctuation">.</span>__tci18n_langs__<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="平台项目管理"><a href="#平台项目管理" class="header-anchor">#</a> 平台项目管理</h2> <p>我们需要一个语料平台来实现语料的上传，发布，翻译等操作，此处不多说，感兴趣可私自问我。
<img src="/Study-Notes/assets/img/platform.7a08bf0c.png" alt="center"></p> <h2 id="架构"><a href="#架构" class="header-anchor">#</a> 架构</h2> <ul><li><img src="/Study-Notes/assets/img/framework.1de3a2ef.png" alt="center"></li></ul> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="parse5-中-p-标签中不能放-div"><a href="#parse5-中-p-标签中不能放-div" class="header-anchor">#</a> parse5 中 p 标签中不能放 div</h3> <p>比如下面这种格式:</p> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    你好啊
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>早上好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>进过<code>parse5</code>转化出来就是</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{$t('你好啊#!!!#src/app.vue_1')}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{$t('早上好#!!!#src/app.vue_1')}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>我们可以发现<code>div</code>跑到<code>p标签</code>的平级去了，因为<code>parse5</code>是严格遵守<code>html规范</code>的，但是给予我们的需求中或者同事写的代码中又会有这种情况，所以只能去修改一下<code>parse5</code>的源代码（此处将<code>parse5</code>的代码复制到本地来的），修改如下：</p> <img src="/Study-Notes/assets/img/parse5_2.36850426.png" alt="center"> <h3 id="parse5-无法解析单标记节点"><a href="#parse5-无法解析单标记节点" class="header-anchor">#</a> parse5 无法解析单标记节点</h3> <p><code>parse5</code>在解析单标记的节点时候会有问题，因为按照<code>html</code>的规范来说是不符合规范的，只能去修改源码</p> <img src="/Study-Notes/assets/img/parse5.63b03ca2.png" alt="center" height="250"> <h3 id="单个文件存在语料重复-需要加上行号标记"><a href="#单个文件存在语料重复-需要加上行号标记" class="header-anchor">#</a> 单个文件存在语料重复，需要加上行号标记</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//使用map数据接口来记录每一个文件中相同语料的数据</span>
<span class="token keyword">const</span> keyMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 组合key</span>
<span class="token keyword">const</span> <span class="token function-variable function">connectKey</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> filePath</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//value就是文件中的中文</span>
  value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>keyMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//以路径为key</span>
    keyMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> fileValueMap <span class="token operator">=</span> keyMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//如果当前文件中没有这个中文语料，就将当前中文的fileValueMap设置为空数组</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fileValueMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fileValueMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> fileValueArr <span class="token operator">=</span> fileValueMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//长度+1</span>
  fileValueArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fileValueArr<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> fileValueArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token comment">//这样就解决了一个文件中出现多个相同中文语料的场景</span>
  <span class="token comment">//最后语料生成出来就是  &quot;哈哈哈哈#!!!#src/app.vue_1&quot;: &quot;哈哈哈哈&quot;,</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">#!!!#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="window-和-mac-上面换行符需要转换一下"><a href="#window-和-mac-上面换行符需要转换一下" class="header-anchor">#</a> window 和 mac 上面换行符需要转换一下</h3> <p>在<code>Mac和Windows</code>操作系统上，获取文件路径时存在一些差异。</p> <p>路径分隔符：</p> <ul><li>在 Mac 上，路径分隔符使用斜杠 <code>/</code>，例如：<code>/Users/username/Documents/file.txt。</code></li> <li>在 Windows 上，路径分隔符使用反斜杠 <code>\</code>，例如：<code>C:\Users\username\Documents\file.txt。</code></li></ul> <p>同意转换成 <code>/</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">formatPath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> p <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> sep <span class="token operator">=</span> path<span class="token punctuation">.</span>sep<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sep <span class="token operator">===</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> p<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div><div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Study-Notes/前端生态/svelte.html" class="prev">
        svelte框架
      </a></span> <span class="next"><a href="/Study-Notes/go/mac如何安装grpc.html">
        mac安装grpc
      </a>
      →
    </span></p></div> <div class="icp-footer"><p>Copyright© 2022-2024 _妄想何方</p> <a href="https://beian.miit.gov.cn/" target="_blank">蜀ICP备2022010321号-1</a></div></div> </main></div><div class="global-ui"></div></div>
    <script src="/Study-Notes/assets/js/app.ef3f82a2.js" defer></script><script src="/Study-Notes/assets/js/2.9c4c794d.js" defer></script><script src="/Study-Notes/assets/js/4.3b198599.js" defer></script><script src="/Study-Notes/assets/js/13.2cd6dd7e.js" defer></script>
  </body>
</html>
